<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Raccourcisseur de liens</title>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: auto; }
    hr { margin: 20px 0; }
    input { padding: 5px; }
    button { padding: 5px 10px; margin-left: 5px; }
    code { background: #eee; padding: 2px 4px; border-radius: 3px; }
  </style>
</head>
<body>
  <h1>Raccourcisseur d’URL (TP6)</h1>

  <!-- Formulaire principal -->
  <form action="/api-v2/" method="post">
    <label>Entrez une URL à raccourcir :</label><br>
    <input type="text" name="url" placeholder="https://exemple.com" required>
    <button type="submit">Raccourcir</button>
  </form>

  <% if (created) { %>
    <p>Lien : <a href="<%= created.shortUrl %>" target="_blank"><%= created.shortUrl %></a></p>
    <p>Token : <%= created.token %></p>
  <% } %>

  <hr>

  <!-- suppression par token -->
  <h3>Supprimer un lien existant</h3>
  <p>Entrez le token de suppression pour effacer un lien raccourci :</p>

  <form action="/api-v2/delete-by-token" method="post">
    <input type="text" name="token" placeholder="Entrez votre token ici" required style="width: 300px;">
    <button type="submit">Supprimer le lien</button>
  </form>

  <% if (message) { %>
    <hr>
    <p style="color:green; font-weight:bold;"><%- message %></p>
  <% } %>

  <% if (error) { %>
    <hr>
    <p style="color:red; font-weight:bold;"><%= error %></p>
  <% } %>
</body>
</html>
